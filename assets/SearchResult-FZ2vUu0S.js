import{u as $,h as ee,i as te,j,k as se,l as ae,t as le,m as oe,n as P,p as B,q as re,w as ie,v as s,x as ue,R as F,y as ne,z as ce,A as pe,D as me,B as he,C as ve,E as ye,F as de,G as Ee,H,I as ge,J as Ae,K as fe,L as Ce,M as Q,N as O,O as Re}from"./app-o8wfpQUt.js";const Be=["/","/intro.html","/posts/JS/","/posts/HTML5/R.html","/posts/HTML5/","/posts/ECMA/CodeExecution.html","/posts/ECMA/HostEnvironment.html","/posts/ECMA/Precompilation.html","/posts/ECMA/","/posts/ECMA/Scope.html","/posts/ECMA/understand.html","/posts/PHP/constants.html","/posts/PHP/control-structures.html","/posts/PHP/functions.html","/posts/PHP/introduce.html","/posts/PHP/oop.html","/posts/PHP/operators.html","/posts/PHP/type.html","/posts/PHP/variables.html","/posts/React/Component-communication.html","/posts/React/DOM.html","/posts/React/Fiber.html","/posts/React/Life-Cycle.html","/posts/React/components.html","/posts/React/components2.html","/posts/React/components3.html","/posts/React/components4.html","/posts/React/csss.html","/posts/React/diff.html","/posts/React/error.html","/posts/React/event.html","/posts/React/eventBind.html","/posts/React/hooks.html","/posts/React/","/posts/React/jsx.html","/posts/React/key.html","/posts/React/perfonrmance.html","/posts/React/perfonrmance2.html","/posts/React/refs.html","/posts/React/render.html","/posts/React/setState.html","/posts/React/state-props.html","/posts/React/super.html","/posts/React/triansion.html","/posts/Typescipt/","/posts/VersionControl/git.html","/posts/Vue/404.html","/posts/Vue/Component-communication.html","/posts/Vue/Modifiers.html","/posts/Vue/RABC.html","/posts/Vue/SPA.html","/posts/Vue/Virtual-DOM.html","/posts/Vue/auto-propetry.html","/posts/Vue/component-plugin.html","/posts/Vue/cors.html","/posts/Vue/data.html","/posts/Vue/diff.html","/posts/Vue/directive.html","/posts/Vue/err-handler.html","/posts/Vue/filter.html","/posts/Vue/if-for.html","/posts/Vue/keep-alive.html","/posts/Vue/key.html","/posts/Vue/life-cycle.html","/posts/Vue/mixin.html","/posts/Vue/mounted.html","/posts/Vue/nextTick.html","/posts/Vue/slot.html","/posts/Vue/vue.html","/posts/Vue/vue3.html","/posts/WX/","/posts/performance/CallOpt.html","/posts/performance/LoadingOpt.html","/posts/performance/","/posts/performance/ResourceOpt.html","/posts/performance/SSG.html","/posts/performance/SSR.html","/posts/performance/UserOpt.html","/posts/performance/renderOpt.html","/posts/webpack/Configuration.html","/posts/webpack/","/posts/webpack/loader.html","/posts/webpack/plugins.html","/posts/HTML5/canvas/","/posts/HTML5/canvas/canvas.html","/posts/ECMA/DataTypes/","/posts/ECMA/Operate/","/posts/ECMA/Operate/RuntimeSemantics.html","/posts/ECMA/Operate/term.html","/posts/ECMA/SyntaxAndLexicology/Parameters.html","/posts/ECMA/SyntaxAndLexicology/","/posts/ECMA/SyntaxAndLexicology/symbol.html","/posts/ECMA/DataTypes/LanguageTypes/","/posts/ECMA/DataTypes/SpecificationTypes/","/posts/ECMA/DataTypes/LanguageTypes/String/","/posts/ECMA/DataTypes/LanguageTypes/String/String.html","/404.html","/posts/","/posts/PHP/","/posts/VersionControl/","/posts/Vue/","/category/","/category/javascript/","/category/htnl/","/category/h5/","/category/ecma%E6%A0%87%E5%87%86/","/category/php/","/category/react/","/category/js%E6%A1%86%E6%9E%B6/","/category/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7/","/category/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","/category/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/","/category/canvas/","/tag/","/tag/%E4%BD%9C%E7%94%A8%E5%9F%9F/","/tag/php/","/tag/react/","/tag/typescript/","/tag/git/","/tag/vue/","/tag/%E5%B0%8F%E7%A8%8B%E5%BA%8F/","/tag/%E9%98%B2%E6%8A%96/","/tag/%E8%8A%82%E6%B5%81/","/tag/%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98/","/tag/%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD/","/tag/%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD/","/tag/%E7%BC%93%E5%AD%98/","/tag/%E5%8E%8B%E7%BC%A9/","/tag/ssg/","/tag/ssr/","/tag/%E5%B1%80%E9%83%A8ssr/","/tag/%E9%A2%84%E6%B8%B2%E6%9F%93/","/tag/%E9%A2%84%E5%8A%A0%E8%BD%BD/","/tag/%E9%AA%A8%E6%9E%B6%E5%B1%8F/","/tag/canvas/","/tag/webpack/","/tag/ecma/","/article/","/star/","/timeline/"],He="SLIMSEARCH_QUERY_HISTORY",d=$(He,[]),Se=()=>{const{queryHistoryCount:a}=H,l=a>0;return{enabled:l,queryHistories:d,addQueryHistory:o=>{l&&(d.value=Array.from(new Set([o,...d.value.slice(0,a-1)])))},removeQueryHistory:o=>{d.value=[...d.value.slice(0,o),...d.value.slice(o+1)]}}},w=a=>Be[a.id]+("anchor"in a?`#${a.anchor}`:""),Me="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=H,E=$(Me,[]),Ve=()=>{const a=I>0;return{enabled:a,resultHistories:E,addResultHistory:l=>{if(a){const o={link:w(l),display:l.display};"header"in l&&(o.header=l.header),E.value=[o,...E.value.slice(0,I-1)]}},removeResultHistory:l=>{E.value=[...E.value.slice(0,l),...E.value.slice(l+1)]}}},ke=a=>{const l=me(),o=j(),S=he(),i=P(0),A=B(()=>i.value>0),v=ve([]);return ye(()=>{const{search:y,terminate:M}=de(),g=Ee(n=>{const{resultsFilter:f=u=>u,querySplitter:T,suggestionsFilter:V,...k}=l.value;n?(i.value+=1,y(n,o.value,k).then(u=>f(u,n,o.value,S.value)).then(u=>{i.value-=1,v.value=u}).catch(u=>{console.warn(u),i.value-=1,i.value||(v.value=[])})):v.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});ge([a,o],([n])=>g(n.join(" "))),Ae(()=>{M()})}),{isSearching:A,results:v}};var De=ee({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:l}){const o=te(),S=j(),i=se(ae),{enabled:A,addQueryHistory:v,queryHistories:y,removeQueryHistory:M}=Se(),{enabled:g,resultHistories:n,addResultHistory:f,removeResultHistory:T}=Ve(),V=A||g,k=le(a,"queries"),{results:u,isSearching:U}=ke(k),r=oe({isQuery:!0,index:0}),m=P(0),h=P(0),b=B(()=>V&&(y.value.length>0||n.value.length>0)),x=B(()=>u.value.length>0),D=B(()=>u.value[m.value]||null),_=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?n.value.length-1:y.value.length-1):r.index=t-1},Y=()=>{const{isQuery:e,index:t}=r;t===(e?y.value.length-1:n.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},G=()=>{m.value=m.value>0?m.value-1:u.value.length-1,h.value=D.value.contents.length-1},J=()=>{m.value=m.value<u.value.length-1?m.value+1:0,h.value=0},W=()=>{h.value<D.value.contents.length-1?h.value+=1:J()},z=()=>{h.value>0?h.value-=1:G()},L=e=>e.map(t=>Re(t)?t:s(t[0],t[1])),K=e=>{if(e.type==="customField"){const t=fe[e.index]||"$content",[c,R=""]=Ce(t)?t[S.value].split("$content"):t.split("$content");return e.display.map(p=>s("div",L([c,...p,R])))}return e.display.map(t=>s("div",L(t)))},C=()=>{m.value=0,h.value=0,l("updateQuery",""),l("close")},N=()=>A?s("ul",{class:"slimsearch-result-list"},s("li",{class:"slimsearch-result-list-item"},[s("div",{class:"slimsearch-result-title"},i.value.queryHistory),y.value.map((e,t)=>s("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{l("updateQuery",e)}},[s(Q,{class:"slimsearch-result-type"}),s("div",{class:"slimsearch-result-content"},e),s("button",{class:"slimsearch-remove-icon",innerHTML:O,onClick:c=>{c.preventDefault(),c.stopPropagation(),M(t)}})]))])):null,X=()=>g?s("ul",{class:"slimsearch-result-list"},s("li",{class:"slimsearch-result-list-item"},[s("div",{class:"slimsearch-result-title"},i.value.resultHistory),n.value.map((e,t)=>s(F,{to:e.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{C()}},()=>[s(Q,{class:"slimsearch-result-type"}),s("div",{class:"slimsearch-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(c=>L(c)).flat())]),s("button",{class:"slimsearch-remove-icon",innerHTML:O,onClick:c=>{c.preventDefault(),c.stopPropagation(),T(t)}})]))])):null;return re("keydown",e=>{if(a.isFocusing){if(x.value){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")W();else if(e.key==="Enter"){const t=D.value.contents[h.value];v(a.queries.join(" ")),f(t),o.push(w(t)),C()}}else if(g){if(e.key==="ArrowUp")_();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(l("updateQuery",y.value[t]),e.preventDefault()):(o.push(n.value[t].link),C())}}}}),ie([m,h],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["slimsearch-result-wrapper",{empty:a.queries.length?!x.value:!b.value}],id:"slimsearch-results"},a.queries.length?U.value?s(ue,{hint:i.value.searching}):x.value?s("ul",{class:"slimsearch-result-list"},u.value.map(({title:e,contents:t},c)=>{const R=m.value===c;return s("li",{class:["slimsearch-result-list-item",{active:R}]},[s("div",{class:"slimsearch-result-title"},e||i.value.defaultTitle),t.map((p,Z)=>{const q=R&&h.value===Z;return s(F,{to:w(p),class:["slimsearch-result-item",{active:q,"aria-selected":q}],onClick:()=>{v(a.queries.join(" ")),f(p),C()}},()=>[p.type==="text"?null:s(p.type==="title"?ne:p.type==="heading"?ce:pe,{class:"slimsearch-result-type"}),s("div",{class:"slimsearch-result-content"},[p.type==="text"&&p.header?s("div",{class:"content-header"},p.header):null,s("div",K(p))])])})])})):i.value.emptyResult:V?b.value?[N(),X()]:i.value.emptyHistory:i.value.emptyResult)}});export{De as default};
