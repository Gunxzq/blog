import{u as $,h as tt,i as st,j,k as et,l as lt,t as at,m as ot,n as V,p as f,q as rt,w as it,v as e,x as pt,R as F,y as ut,z as nt,A as ct,D as mt,B as ht,C as vt,E as yt,F as dt,G as gt,H,I as Et,J as St,K as Ct,L as At,M as Q,N as O,O as Rt}from"./app-C9qP9JtV.js";const ft=["/","/intro.html","/posts/HTML5/R.html","/posts/HTML5/","/posts/CSS/ParallaxScrolling.html","/posts/CSS/anmiate.html","/posts/CSS/box.html","/posts/CSS/center.html","/posts/CSS/css.html","/posts/CSS/css3.html","/posts/CSS/flex.html","/posts/CSS/flexL.html","/posts/CSS/grid.html","/posts/CSS/hidden.html","/posts/CSS/layout.html","/posts/CSS/overflow.html","/posts/ECMA/CodeExecution.html","/posts/ECMA/HostEnvironment.html","/posts/ECMA/Precompilation.html","/posts/ECMA/","/posts/ECMA/Scope.html","/posts/ECMA/understand.html","/posts/HTTP/CDN.html","/posts/HTTP/DNS.html","/posts/HTTP/HTTP.html","/posts/HTTP/OSI.html","/posts/HTTP/TCP-IP.html","/posts/HTTP/UDP-TCP.html","/posts/HTTP/URL.html","/posts/HTTP/WebSocket.html","/posts/HTTP/code.html","/posts/HTTP/get-post.html","/posts/HTTP/header.html","/posts/HTTP/","/posts/HTTP/three.html","/posts/JS/Memory.html","/posts/JS/Recursion.html","/posts/JS/extend.html","/posts/JS/","/posts/JS/number.html","/posts/PHP/constants.html","/posts/PHP/control-structures.html","/posts/PHP/functions.html","/posts/PHP/introduce.html","/posts/PHP/oop.html","/posts/PHP/operators.html","/posts/PHP/type.html","/posts/PHP/variables.html","/posts/React/Component-communication.html","/posts/React/DOM.html","/posts/React/Fiber.html","/posts/React/Life-Cycle.html","/posts/React/SSR.html","/posts/React/components.html","/posts/React/components2.html","/posts/React/components3.html","/posts/React/components4.html","/posts/React/csss.html","/posts/React/diff.html","/posts/React/error.html","/posts/React/event.html","/posts/React/eventBind.html","/posts/React/hooks.html","/posts/React/immutable.html","/posts/React/","/posts/React/jsx.html","/posts/React/key.html","/posts/React/perfonrmance.html","/posts/React/perfonrmance2.html","/posts/React/redux.html","/posts/React/refs.html","/posts/React/render.html","/posts/React/router.html","/posts/React/setState.html","/posts/React/state-props.html","/posts/React/super.html","/posts/React/triansion.html","/posts/Typescipt/","/posts/VersionControl/git.html","/posts/Vue/404.html","/posts/Vue/Component-communication.html","/posts/Vue/Modifiers.html","/posts/Vue/RABC.html","/posts/Vue/SPA.html","/posts/Vue/Virtual-DOM.html","/posts/Vue/auto-propetry.html","/posts/Vue/component-plugin.html","/posts/Vue/cors.html","/posts/Vue/data.html","/posts/Vue/diff.html","/posts/Vue/directive.html","/posts/Vue/err-handler.html","/posts/Vue/filter.html","/posts/Vue/if-for.html","/posts/Vue/keep-alive.html","/posts/Vue/key.html","/posts/Vue/life-cycle.html","/posts/Vue/mixin.html","/posts/Vue/mounted.html","/posts/Vue/nextTick.html","/posts/Vue/slot.html","/posts/Vue/vue.html","/posts/Vue/vue3.html","/posts/WX/","/posts/performance/CallOpt.html","/posts/performance/LoadingOpt.html","/posts/performance/","/posts/performance/ResourceOpt.html","/posts/performance/SSG.html","/posts/performance/SSR.html","/posts/performance/UserOpt.html","/posts/performance/renderOpt.html","/posts/webpack/Configuration.html","/posts/webpack/","/posts/webpack/loader.html","/posts/webpack/plugins.html","/posts/HTML5/canvas/","/posts/HTML5/canvas/canvas.html","/posts/ECMA/DataTypes/","/posts/ECMA/Operate/","/posts/ECMA/Operate/RuntimeSemantics.html","/posts/ECMA/Operate/term.html","/posts/ECMA/SyntaxAndLexicology/Parameters.html","/posts/ECMA/SyntaxAndLexicology/","/posts/ECMA/SyntaxAndLexicology/symbol.html","/posts/ECMA/DataTypes/LanguageTypes/","/posts/ECMA/DataTypes/SpecificationTypes/","/posts/ECMA/DataTypes/LanguageTypes/String/","/posts/ECMA/DataTypes/LanguageTypes/String/String.html","/404.html","/posts/","/posts/CSS/","/posts/PHP/","/posts/VersionControl/","/posts/Vue/","/category/","/category/htnl/","/category/h5/","/category/css/","/category/ecma%E6%A0%87%E5%87%86/","/category/react/","/category/javascript/","/category/php/","/category/js%E6%A1%86%E6%9E%B6/","/category/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7/","/category/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","/category/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/","/category/canvas/","/tag/","/tag/%E4%BD%9C%E7%94%A8%E5%9F%9F/","/tag/react/","/tag/php/","/tag/typescript/","/tag/git/","/tag/vue/","/tag/%E5%B0%8F%E7%A8%8B%E5%BA%8F/","/tag/%E9%98%B2%E6%8A%96/","/tag/%E8%8A%82%E6%B5%81/","/tag/%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98/","/tag/%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD/","/tag/%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD/","/tag/%E7%BC%93%E5%AD%98/","/tag/%E5%8E%8B%E7%BC%A9/","/tag/ssg/","/tag/ssr/","/tag/%E5%B1%80%E9%83%A8ssr/","/tag/%E9%A2%84%E6%B8%B2%E6%9F%93/","/tag/%E9%A2%84%E5%8A%A0%E8%BD%BD/","/tag/%E9%AA%A8%E6%9E%B6%E5%B1%8F/","/tag/canvas/","/tag/webpack/","/tag/ecma/","/article/","/star/","/timeline/"],Ht="SLIMSEARCH_QUERY_HISTORY",d=$(Ht,[]),Tt=()=>{const{queryHistoryCount:l}=H,a=l>0;return{enabled:a,queryHistories:d,addQueryHistory:o=>{a&&(d.value=Array.from(new Set([o,...d.value.slice(0,l-1)])))},removeQueryHistory:o=>{d.value=[...d.value.slice(0,o),...d.value.slice(o+1)]}}},L=l=>ft[l.id]+("anchor"in l?`#${l.anchor}`:""),Bt="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=H,g=$(Bt,[]),Pt=()=>{const l=I>0;return{enabled:l,resultHistories:g,addResultHistory:a=>{if(l){const o={link:L(a),display:a.display};"header"in a&&(o.header=a.header),g.value=[o,...g.value.slice(0,I-1)]}},removeResultHistory:a=>{g.value=[...g.value.slice(0,a),...g.value.slice(a+1)]}}},xt=l=>{const a=mt(),o=j(),T=ht(),i=V(0),S=f(()=>i.value>0),v=vt([]);return yt(()=>{const{search:y,terminate:B}=dt(),E=gt(u=>{const{resultsFilter:C=p=>p,querySplitter:w,suggestionsFilter:P,...x}=a.value;u?(i.value+=1,y(u,o.value,x).then(p=>C(p,u,o.value,T.value)).then(p=>{i.value-=1,v.value=p}).catch(p=>{console.warn(p),i.value-=1,i.value||(v.value=[])})):v.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});Et([l,o],([u])=>E(u.join(" "))),St(()=>{B()})}),{isSearching:S,results:v}};var kt=tt({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:a}){const o=st(),T=j(),i=et(lt),{enabled:S,addQueryHistory:v,queryHistories:y,removeQueryHistory:B}=Tt(),{enabled:E,resultHistories:u,addResultHistory:C,removeResultHistory:w}=Pt(),P=S||E,x=at(l,"queries"),{results:p,isSearching:U}=xt(x),r=ot({isQuery:!0,index:0}),m=V(0),h=V(0),b=f(()=>P&&(y.value.length>0||u.value.length>0)),M=f(()=>p.value.length>0),k=f(()=>p.value[m.value]||null),J=()=>{const{isQuery:t,index:s}=r;s===0?(r.isQuery=!t,r.index=t?u.value.length-1:y.value.length-1):r.index=s-1},_=()=>{const{isQuery:t,index:s}=r;s===(t?y.value.length-1:u.value.length-1)?(r.isQuery=!t,r.index=0):r.index=s+1},N=()=>{m.value=m.value>0?m.value-1:p.value.length-1,h.value=k.value.contents.length-1},W=()=>{m.value=m.value<p.value.length-1?m.value+1:0,h.value=0},Y=()=>{h.value<k.value.contents.length-1?h.value+=1:W()},G=()=>{h.value>0?h.value-=1:N()},D=t=>t.map(s=>Rt(s)?s:e(s[0],s[1])),z=t=>{if(t.type==="customField"){const s=Ct[t.index]||"$content",[n,R=""]=At(s)?s[T.value].split("$content"):s.split("$content");return t.display.map(c=>e("div",D([n,...c,R])))}return t.display.map(s=>e("div",D(s)))},A=()=>{m.value=0,h.value=0,a("updateQuery",""),a("close")},K=()=>S?e("ul",{class:"slimsearch-result-list"},e("li",{class:"slimsearch-result-list-item"},[e("div",{class:"slimsearch-result-title"},i.value.queryHistory),y.value.map((t,s)=>e("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===s}],onClick:()=>{a("updateQuery",t)}},[e(Q,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},t),e("button",{class:"slimsearch-remove-icon",innerHTML:O,onClick:n=>{n.preventDefault(),n.stopPropagation(),B(s)}})]))])):null,X=()=>E?e("ul",{class:"slimsearch-result-list"},e("li",{class:"slimsearch-result-list-item"},[e("div",{class:"slimsearch-result-title"},i.value.resultHistory),u.value.map((t,s)=>e(F,{to:t.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===s}],onClick:()=>{A()}},()=>[e(Q,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},[t.header?e("div",{class:"content-header"},t.header):null,e("div",t.display.map(n=>D(n)).flat())]),e("button",{class:"slimsearch-remove-icon",innerHTML:O,onClick:n=>{n.preventDefault(),n.stopPropagation(),w(s)}})]))])):null;return rt("keydown",t=>{if(l.isFocusing){if(M.value){if(t.key==="ArrowUp")G();else if(t.key==="ArrowDown")Y();else if(t.key==="Enter"){const s=k.value.contents[h.value];v(l.queries.join(" ")),C(s),o.push(L(s)),A()}}else if(E){if(t.key==="ArrowUp")J();else if(t.key==="ArrowDown")_();else if(t.key==="Enter"){const{index:s}=r;r.isQuery?(a("updateQuery",y.value[s]),t.preventDefault()):(o.push(u.value[s].link),A())}}}}),it([m,h],()=>{var t;(t=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!M.value:!b.value}],id:"slimsearch-results"},l.queries.length?U.value?e(pt,{hint:i.value.searching}):M.value?e("ul",{class:"slimsearch-result-list"},p.value.map(({title:t,contents:s},n)=>{const R=m.value===n;return e("li",{class:["slimsearch-result-list-item",{active:R}]},[e("div",{class:"slimsearch-result-title"},t||i.value.defaultTitle),s.map((c,Z)=>{const q=R&&h.value===Z;return e(F,{to:L(c),class:["slimsearch-result-item",{active:q,"aria-selected":q}],onClick:()=>{v(l.queries.join(" ")),C(c),A()}},()=>[c.type==="text"?null:e(c.type==="title"?ut:c.type==="heading"?nt:ct,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},[c.type==="text"&&c.header?e("div",{class:"content-header"},c.header):null,e("div",z(c))])])})])})):i.value.emptyResult:P?b.value?[K(),X()]:i.value.emptyHistory:i.value.emptyResult)}});export{kt as default};
