---
date: 2025-03-19
category:
  - JavaScript
---

# 数字精度丢失
在JavaScript中，现在主流的数值类型是Number，而Number采用的是**IEEE754**规范中64位双精度浮点数编码
存储二进制时小数点的偏移量最大为52位，最多可以表达的位数是2^53=9007199254740992，对应科学计数尾数是 9.007199254740992，这也是 JS 最多能表示的精度

它的长度是 16，所以可以使用 toPrecision(16) 来做精度运算，超过的精度会自动做凑整处理

```js
.10000000000000000555.toPrecision(16)
// 返回 0.1000000000000000，去掉末尾的零后正好为 0.1
```

超出这个精度，数值就不准确
```js
0.1.toPrecision(21) = 0.100000000000000005551
```

## 解决
- 考虑到每次浮点数运算的偏差非常小(其实不然)，可以对结果进行指定精度的四舍五入，比如可以parseFloat(result.toFixed(12));
- 将浮点数转为整数运算，再对结果做除法。比如0.1 + 0.2，可以转化为(1*2)/3。
- 把浮点数转化为字符串，模拟实际运算的过程。
 比如bignumber.js，decimal.js，以及big.js








